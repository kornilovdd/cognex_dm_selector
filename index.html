<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
    
    <title>Cognex DataMan Configurator</title>
</head>
<body>
    <div class="container-sm" style="max-width: 600px;" id="frm">
        <!-- <img src="https://cdn-ru.bitrix24.ru/b16270182/landing/60a/60a94f63a2afbbb63b11d9d02f961ead/SP_AUTOMATION_2_1x.png" class="img-thumbnail" alt="..." style="width: 40%;"> -->
        <!-- <img src="https://drive.google.com/file/d/1BJeeD0wfwBkcr93qPRM4fsCkah_Tyl3B/view?usp=drive_link" class="img-thumbnail" alt="..." style="width: 17%;"> -->
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label"  style="margin-top: .5rem;">Укажите модель:</label>
            <select class="form-select" aria-label="Default select example" id="model" type="reset">
                <option value="0" selected>Модель...</option>
                <option value="1" rx = "752" ry = "480" lens = "7">Cognex DM 260 ** 6.3 mm </option>
                <option value="2" rx = "752" ry = "480" lens = "16">Cognex DM 260 ** 16 mm</option>
                <option value="3" rx = "1280" ry = "960" lens = "7">Cognex DM 262 ** 6.3 mm</option>
                <option value="4" rx = "1280" ry = "960" lens = "16">Cognex DM 262 ** 16 mm</option>
                <option value="5" rx = "1440" ry = "1080" lens = "6">Cognex DM 280 ** 6.2 mm</option>
                <option value="6" rx = "1440" ry = "1080" lens = "16">Cognex DM 280 ** 16 mm</option>
                <option value="7" rx = "1920" ry = "1080" lens = "8">Cognex DM 282 ** 8 mm</option>
                <option value="8" rx = "1920" ry = "1080" lens = "12">Cognex DM 282 ** 12 mm</option>
                <option value="9" rx = "1920" ry = "1080" lens = "16">Cognex DM 282 ** 16 mm</option>
                <option value="10" rx = "2048" ry = "1536" lens = "8">Cognex DM 374 ** 8 mm</option>
                <option value="11" rx = "2048" ry = "1536" lens = "10">Cognex DM 374 ** 10 mm</option>
                <option value="12" rx = "2048" ry = "1536" lens = "16">Cognex DM 374 ** 16 mm</option>
                <option value="13" rx = "2048" ry = "1536" lens = "24">Cognex DM 374 ** 24 mm</option>
                <option value="14" rx = "2048" ry = "1536" lens = "35">Cognex DM 374 ** 35 mm</option>
                <option value="15" rx = "2448" ry = "2048" lens = "8">Cognex DM 375 ** 8 mm</option>
                <option value="16" rx = "2448" ry = "2048" lens = "10">Cognex DM 375 ** 10 mm</option>
                <option value="17" rx = "2448" ry = "2048" lens = "16">Cognex DM 375 ** 16 mm</option>
                <option value="18" rx = "2448" ry = "2048" lens = "24">Cognex DM 375 ** 24 mm</option>
                <option value="19" rx = "2448" ry = "2048" lens = "35">Cognex DM 375 ** 35 mm</option>
                <option value="20" rx = "2048" ry = "1536" lens = "">Cognex DM 374 ** C-Mount</option>
                <option value="21" rx = "2448" ry = "2048" lens = "">Cognex DM 375 ** C-Mount</option>

                <!-- <option value="15" rx = "1920" ry = "1080" lens = "16">DM 282 ** 16 mm</option>
                <option value="16" rx = "1920" ry = "1080" lens = "16">DM 282 ** 16 mm</option> -->
                
            </select>
            <script type="text/javascript">
                mdl = document.getElementById("model");
                mdl.onchange = function () {
                    model = document.getElementById("model");
                    lens = document.getElementById("lens");
                    resx = document.getElementById("RX");
                    resy = document.getElementById("RY");

                    if (Number(model.value) >= 20) {
                        lens.removeAttribute('disabled');
                    } else {
                        lens.setAttribute('disabled','true');
                    }
                    resx.value = model.options[this.selectedIndex].getAttribute("rx");
                    resy.value = model.options[this.selectedIndex].getAttribute("ry");
                }
              </script>
        </div>
        <div class="input-group">
            <span class="input-group-text" style="width: 35%;">Разрешение</span>
            <input type="text" aria-label="X" class="form-control" id="RX" disabled style="text-align: center;">
            <input type="text" aria-label="Y" class="form-control" id="RY" disabled style="text-align: center;">
          </div>
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label"  style="margin-top: .5rem;">Укажите объектив (для R7000 series):</label>
            <select class="form-select" aria-label="Default select example" id="lens" disabled>
                <option selected value="12">12 mm </option>
                <option value="16">16 mm</option>
                <option value="25">25 mm</option>
                <option value="35">35 mm</option>
                <option value="40">40 mm</option>
            </select>
        </div>
        <div class="mb-3">

            <label for="exampleFormControlInput1" class="form-label" >Укажите ширину области:</label>
            <div class="input-group">
                <span class="input-group-text" style="width: 25%;">FOV X</span>
                <input type="text" aria-label="FOV X" class="form-control" id="fovx" style="text-align: center;" value = "100">
            </div>
            <label for="exampleFormControlInput1" class="form-label"  style="margin-top: .5rem;">Размер в мм</label>
            <select class="form-select" aria-label="Size of code" id="size">
                <option value="6">6x6 mm</option>
                <option value="7">7x7 mm</option>
                <option value="8">8x8 mm</option>
                <option value="9">9x9 mm</option>
                <option value="10">10x10 mm</option>
                <option value="11">11x11 mm</option>
                <option value="12" selected>12x12 mm</option>
                <option value="13">13x13 mm</option>
                <option value="14">14x14 mm</option>
                <option value="15">15x15 mm</option>
                <option value="16">16x16 mm</option>
                <option value="17">17x17 mm</option>
                <option value="18">18x18 mm</option>
                <option value="19">19x19 mm</option>
                <option value="20">20x20 mm</option>
                <option value="21">21x21 mm</option>
                <option value="22">22x22 mm</option>
                <option value="23">23x23 mm</option>
                <option value="24">24x24 mm</option>
                <option value="25">25x25 mm</option>
                <option value="26">26x26 mm</option>
            </select>
            <label for="exampleFormControlInput1" class="form-label" style="margin-top: .5rem;"  style="margin-top: .5rem;">Количество ячеек:</label>
            <select class="form-select" aria-label="Cells of code" id="cells">
                <option value="20" selected>20x20</option>
                <option value="22">22x22</option>
                <option value="24">24x24</option>
                <option value="26">26x26</option>
                <option value="32">32x32</option>
                <option value="36">36x36</option>
                <option value="40">40x40</option>
                <option value="44">44x44</option>
            </select>
        </div>


        <div class="mb-3" style="display: grid;">
            <button type="button" class="btn btn-outline-primary" onclick= mainFunc()>Расчитать параметры</button>
            <script>
                function mainFunc() {
                    camModel = document.getElementById("model");
                    lensType = document.getElementById("lens");
                    fovX = document.getElementById("fovx");
                    fovY = document.getElementById("fovy");
                    WD = document.getElementById("wd");
                    pxmm = document.getElementById("pxmm");
                    sizemm = document.getElementById("sizemm");
                    sizemil = document.getElementById("sizemil");
                    ppe = document.getElementById("ppe");
                    size = Number(document.getElementById("size").value);
                    cells = Number(document.getElementById("cells").value);
                    resX = Number(document.getElementById("RX").value);
                    resY = Number(document.getElementById("RY").value);

                    form = document.getElementById("results");

                    

                    ratio = 0;
                    countFOVY = 0;
                    countWD = 0;
                    focal = 0;
                    accuracyPXmm = 0;
                    countSizeMM = 0;
                    countSizeMil = 0;
                    accuracyPPE = 0;
                    if (Number(camModel.value) == 0) {
                        alert("Выберите модель устройства");
                        return "stop"
                    }
                    form.style.display = "block";
                    if (Number(camModel.value < 9)) {
                        focal = Number(camModel.options[camModel.selectedIndex].getAttribute('lens'));
                    } else if (Number(camModel.value >= 9)) {
                        focal = Number(lensType.value)
                    }

                    ratio = resX/resY;
                    countFOVY = Math.floor(Number(fovX.value)/ratio);
                    fovY.value = countFOVY;

                    cmosX = resX*3.75/1000;
                    countWD = Math.floor(focal*(fovx.value/cmosX+1));
                    WD.value = countWD;

                    accuracyPXmm = Math.floor(resX/Number(fovX.value));
                    pxmm.value = accuracyPXmm;

                    countSizeMM = size/cells;
                    countSizeMil = countSizeMM*39.37;

                    sizemm.value = String(countSizeMM.toFixed(2))+" mm";
                    sizemil.value = String(countSizeMil.toFixed(2)) + " mil";

                    accuracyPPE = countSizeMM*accuracyPXmm;
                    ppe.value = accuracyPPE.toFixed(2);
                    if (accuracyPPE < 3) {
                        ppe.style.backgroundColor = 'MistyRose'
                    } else if (3 < accuracyPPE < 8) {
                        ppe.style.backgroundColor = 'PaleGreen'
                    }


                }
            </script>
        </div>

    <div class="mb-3" id = "results" style="display: none;">
        <img src="https://drive.google.com/uc?export=view&id=1TEuf_hAcMz4-Z1JYcdO-4utMA-4SChT8" class="img-thumbnail" alt="...">
        <label for="exampleFormControlInput1" class="form-label"  style="margin-top: .5rem;">Высота области:</label>
        <div class="input-group">
            <span class="input-group-text" style="width: 25%;">FOV Y</span>
            <input type="text" aria-label="FOV Y" class="form-control" id="fovy" style="text-align: center;" disabled>
        </div>

        <label for="exampleFormControlInput1" class="form-label"  style="margin-top: .5rem;">Расстояние установки:</label>
        <div class="input-group">
            <span class="input-group-text" style="width: 25%;">WD</span>
            <input type="text" aria-label="WD" class="form-control" id="wd" style="text-align: center;" disabled>
        </div>

        <label for="exampleFormControlInput1" class="form-label"  style="margin-top: .5rem;">Точность пикселей на мм:</label>
        <div class="input-group">
            <span class="input-group-text" style="width: 25%;">PX/mm</span>
            <input type="text" aria-label="accuracy pxmm" class="form-control" id="pxmm" style="text-align: center;" disabled>
        </div>

        <label for="exampleFormControlInput1" class="form-label"  style="margin-top: .5rem;">Размер элемента:</label>
        
        <div class="input-group">
            <span class="input-group-text" style="width: 25%;">Размер</span>
            <input type="text" aria-label="mm" class="form-control" id="sizemm" disabled style="text-align: center;">
            <input type="text" aria-label="mil" class="form-control" id="sizemil" disabled style="text-align: center;">
          </div>

        <label for="exampleFormControlInput1" class="form-label"  style="margin-top: .5rem;">Точность пикселей на элемент кода:</label>
        <div class="input-group">
            <span class="input-group-text" style="width: 25%;">PPE</span>
            <input type="text" aria-label="sizemil" class="form-control" id="ppe" style="text-align: center;" disabled>
        </div>

    </div>
    <div class="mb-3" style="display: grid;">
        <button type="button" class="btn btn-outline-secondary" onclick=resetFunc()>Сбросить</button>
        <script>
            function resetFunc() {
                camModel = document.getElementById("model");
                lensType = document.getElementById("lens");
                fovX = document.getElementById("fovx");
                fovY = document.getElementById("fovy");
                WD = document.getElementById("wd");
                pxmm = document.getElementById("pxmm");
                sizemm = document.getElementById("sizemm");
                sizemil = document.getElementById("sizemil");
                ppe = document.getElementById("ppe");
                size = document.getElementById("size");
                cells = document.getElementById("cells");
                resX = document.getElementById("RX");
                resY = document.getElementById("RY");

                form = document.getElementById("results");

                camModel.selectedIndex = "0";
                resX.value = "";
                resY.value = "";
                lens.selectedIndex = "0";
                fovX.value = "100";
                sizemm.selectedIndex = "6";
                sizemil.selectedIndex = "0";
                fovY.value = "";
                WD.value = "";
                pxmm.value = "";
                ppe.value = "";
                sizemm.value = "";
                sizemil.value = "";
                form.style.display = "none";
            }
        </script>
    
</body>
</html>
